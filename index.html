<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Fun Math Practice for Kids</title>
  <style>
    body {
      background-color: #f0f8ff;
      font-family: 'Comic Sans MS', cursive, sans-serif;
      text-align: center;
      padding: 20px;
    }
    h1 {
      color: #ff4500;
    }
    .scoreboard {
      margin-bottom: 20px;
    }
    #progressContainer {
      width: 80%;
      background-color: #ddd;
      border-radius: 10px;
      margin: 10px auto;
      height: 20px;
      overflow: hidden;
    }
    #progressBar {
      height: 100%;
      width: 0;
      background-color: #32cd32;
    }
    .problem-container {
      background-color: #fffacd;
      border: 2px solid #ffa500;
      border-radius: 10px;
      padding: 20px;
      display: inline-block;
      margin-top: 20px;
    }
    .input-container {
      margin: 15px 0;
    }
    input[type="number"] {
      padding: 10px;
      font-size: 16px;
      width: 150px;
      text-align: center;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      background-color: #ff4500;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin: 10px;
    }
    button:hover {
      background-color: #ff6347;
    }
    button:disabled {
      background-color: #aaa;
      cursor: not-allowed;
    }
    .message {
      font-size: 18px;
      font-weight: bold;
      margin-top: 10px;
    }
    .help-message {
      font-size: 16px;
      color: #00008B;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1>Welcome to Fun Math Practice!</h1>
  <p>Practice your math skills with interactive problems!</p>
  
  <div class="scoreboard">
    <p id="scoreDisplay">Score: 0</p>
    <p id="attemptsDisplay">Attempts: 0 / 10</p>
    <div id="progressContainer">
      <div id="progressBar"></div>
    </div>
  </div>
  
  <div class="problem-container">
    <p id="problem">Press ENTER after typing your answer to begin!</p>
    <div class="input-container">
      <label for="answer"><strong>Your Answer:</strong></label><br>
      <input type="number" id="answer" placeholder="Type a number" autocomplete="off">
    </div>
    <!-- Help and Reset buttons -->
    <button id="helpButton" onclick="showHelp()">Help</button>
    <button id="resetButton" onclick="resetSession()" disabled>Reset Session</button>
    <p class="message" id="message"></p>
    <p class="help-message" id="helpMessage"></p>
  </div>
  
  <script>
    let correctAnswer = 0;
    const totalAttempts = 10;
    let attempts = 0;
    let score = 0;
    // Variables to store current problem values for help hints
    let currentNum1 = 0;
    let currentNum2 = 0;
    let currentOperator = "";
    
    // Update scoreboard and progress bar
    function updateScoreboard() {
      document.getElementById("scoreDisplay").innerText = `Score: ${score}`;
      document.getElementById("attemptsDisplay").innerText = `Attempts: ${attempts} / ${totalAttempts}`;
      const progressPercent = (attempts / totalAttempts) * 100;
      document.getElementById("progressBar").style.width = progressPercent + "%";
    }
    
    // Generate a new math problem and store its components for the Help feature
    function generateProblem() {
      if (attempts >= totalAttempts) return;
      
      // Clear any previous messages and help hints
      document.getElementById("message").innerText = "";
      document.getElementById("helpMessage").innerText = "";
      document.getElementById("answer").value = "";
      
      // Generate two random numbers between 1 and 20
      currentNum1 = Math.floor(Math.random() * 20) + 1;
      currentNum2 = Math.floor(Math.random() * 20) + 1;
      
      // Randomly choose an operator: +, -, or *
      const operators = ["+", "-", "*"];
      currentOperator = operators[Math.floor(Math.random() * operators.length)];
      
      let problemText = "";
      if (currentOperator === "+") {
        correctAnswer = currentNum1 + currentNum2;
        problemText = `${currentNum1} + ${currentNum2} = ?`;
      } else if (currentOperator === "-") {
        // Ensure non-negative result for subtraction
        if (currentNum1 < currentNum2) {
          correctAnswer = currentNum2 - currentNum1;
          problemText = `${currentNum2} - ${currentNum1} = ?`;
        } else {
          correctAnswer = currentNum1 - currentNum2;
          problemText = `${currentNum1} - ${currentNum2} = ?`;
        }
      } else if (currentOperator === "*") {
        correctAnswer = currentNum1 * currentNum2;
        problemText = `${currentNum1} * ${currentNum2} = ?`;
      }
      
      document.getElementById("problem").innerText = problemText;
    }
    
    // Check the user's answer when ENTER is pressed
    function checkAnswer() {
      if (attempts >= totalAttempts) return;
      
      const answerInput = document.getElementById("answer");
      const userAnswer = parseInt(answerInput.value);
      const messageEl = document.getElementById("message");
      
      if (isNaN(userAnswer)) {
        messageEl.innerText = "Please enter a valid number. ðŸ¤”";
        messageEl.style.color = "red";
        return;
      }
      
      attempts++;
      
      if (userAnswer === correctAnswer) {
        score++;
        messageEl.innerText = "Correct! Great job! ðŸ˜Š";
        messageEl.style.color = "green";
      } else {
        messageEl.innerText = "Oops! That's not correct. ðŸ˜ž";
        messageEl.style.color = "red";
      }
      
      updateScoreboard();
      
      if (attempts < totalAttempts) {
        setTimeout(generateProblem, 1000);
      } else {
        endSession();
      }
    }
    
    // Show a help hint based on the current problem
    function showHelp() {
      if (attempts >= totalAttempts) return;
      let helpText = "";
      if (currentOperator === "+") {
        helpText = `Hint: To add ${currentNum1} and ${currentNum2}, you can count up from one of the numbers. For example, add ${currentNum1} to itself ${currentNum2} times or vice versa.`;
      } else if (currentOperator === "-") {
        helpText = `Hint: For subtraction, think of it as "taking away". If the problem is "${document.getElementById("problem").innerText}", imagine you have ${currentNum1} items and you remove ${currentNum2} items (or vice versa), then count what remains.`;
      } else if (currentOperator === "*") {
        helpText = `Hint: Multiplication means repeated addition. For example, ${currentNum1} * ${currentNum2} is like adding ${currentNum1} together ${currentNum2} times.`;
      }
      document.getElementById("helpMessage").innerText = helpText;
    }
    
    // End the session, disable input, enable reset, and display a cool math fact.
    function endSession() {
      document.getElementById("answer").disabled = true;
      document.getElementById("helpButton").disabled = true;
      document.getElementById("resetButton").disabled = false;
      const messageEl = document.getElementById("message");
      messageEl.innerText = "Session complete! ðŸŽ‰ Cool Fact: Math is like a superpowerâ€”its patterns and logic help us understand the universe, from natureâ€™s spirals to the rhythms of music. Keep practicing and you'll unlock even more wonders!";
      messageEl.style.color = "#00008B";
      document.getElementById("problem").innerText = "Well done! Press Reset to start a new session.";
    }
    
    // Reset the session to start over.
    function resetSession() {
      attempts = 0;
      score = 0;
      document.getElementById("answer").disabled = false;
      document.getElementById("helpButton").disabled = false;
      document.getElementById("resetButton").disabled = true;
      updateScoreboard();
      document.getElementById("message").innerText = "";
      document.getElementById("helpMessage").innerText = "";
      generateProblem();
    }
    
    // Listen for the ENTER key on the input field
    document.getElementById("answer").addEventListener("keydown", function(e) {
      if (e.key === "Enter") {
        checkAnswer();
      }
    });
    
    // Generate the first problem when the page loads
    window.onload = generateProblem;
  </script>
</body>
</html>
